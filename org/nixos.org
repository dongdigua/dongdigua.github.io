#+TITLE: Build a Minimal NixOS LiveCD with swaywm
#+DATE: <2022-09-17 å…­>

* problem & solution
** unable to drop root
donot run under root
** in normal user, libseat permission deniened
add user in =video= group
login as user, not root
** egl error
enable 3D acceleration in VirtualBox
** config files from outside
[[../images/irc-nixiso.png]] 
but it is copied using xoriso to =/iso/=
so I need to write a systemd service to automagically sync it at boot
** cleanup builds
=/nix/store/= takes too much space after build
#+BEGIN_SRC sh
unlink result
nix-store <path>
#+END_SRC
and there're a few tools for visualising disk size:
https://nixos.wiki/wiki/Cleaning_the_nix_store

* reference
** [[https://sr.ht/~guido/nixos-init-freedom/][nixos without systemd?]]
** [[https://gist.github.com/kborling/76805ade81ac5bfdd712df294208c878][an example config]]
** [[https://xeiaso.net/blog/super-bootable-64-2020-05-06][Xe: Super Bootable 64]]
